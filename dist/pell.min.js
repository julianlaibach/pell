!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pell={})}(this,function(e){"use strict";function t(e){return document.queryCommandState(e)}function n(e,t){e.target.closest(".pell").getElementsByClassName("pell-popup")[0].style.display="flex"}function u(e,t){function n(e,t){e.target.closest(".pell").getElementsByClassName("pell-popup")[0].style.display="none"}var o=d("div"),i=d("div"),r=d("div"),u=d("button"),l=d("div"),c=d("div");o.className=e.popup,i.className=e.popup_inner,r.className=e.popup_header,c.className=e.popup_content,l.innerHTML="Farbauswahl",p(t.element,o),p(o,i),p(i,r),p(r,l),p(r,u),p(i,c),["#f4f4f4","#f6f6f6","#999999"].forEach(function(t){var e=d("button");e.className="popup-color-button",e.style.background=t,p(c,e),s(e,"click",function(e){f("styleWithCSS",!0),f("foreColor",t),n(e),console.log(t)})}),u.innerHTML="x",u.addEventListener("click",function(e){n(e)})}function o(t){var e=t.actions?t.actions.map(function(e){return"string"==typeof e?b[e]:b[e.name]?l({},b[e.name],e):e}):Object.keys(b).map(function(e){return b[e]}),o=l({},m,t.classes),n=t[c]||"div",i=d("div"),r=(i.className=o.actionbar,p(t.element,i),t.element.content=d("div"));return r.contentEditable=!0,r.className=o.content,r.oninput=function(e){e=e.target.firstChild;e&&3===e.nodeType?f(a,"<"+n+">"):"<br>"===r.innerHTML&&(r.innerHTML=""),t.onChange(r.innerHTML)},r.onkeydown=function(e){"Enter"===e.key&&"blockquote"===document.queryCommandValue(a)&&setTimeout(function(){return f(a,"<"+n+">")},0)},p(t.element,r),e.forEach(function(e){var t,n=d("button");n.className=o.button,n.innerHTML=e.icon,n.title=e.title,n.setAttribute("type","button"),n.onclick=function(){return e.result()&&r.focus()&&console.log("click")},e.state&&(s(r,"keyup",t=function(){return n.classList[e.state()?"add":"remove"](o.selected)}),s(r,"mouseup",t),s(n,"click",t)),p(i,n)}),t.styleWithCSS&&(f("styleWithCSS"),f(c,n)),u(o,t),t.element}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,o=arguments[t];for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},c="defaultParagraphSeparator",a="formatBlock",s=function(e,t,n){return e.addEventListener(t,n)},p=function(e,t){return e.appendChild(t)},d=function(e){return document.createElement(e)},f=function(e){return document.execCommand(e,!1,1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)},b={foreColor:{icon:'<b style="border: 1px solid; background: pink; padding: 2px 5px">A</b>',title:"Bold",result:function(){return n(event)}},backColor:{icon:'<b style="border: 1px solid; color: pink; padding: 2px 5px">A</b>',title:"Bold",result:function(){return n(event)}},bold:{icon:"<b>B</b>",title:"Bold",state:function(){return t("bold")},result:function(){return f("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return t("italic")},result:function(){return f("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return t("underline")},result:function(){return f("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return t("strikeThrough")},result:function(){return f("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return f(a,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return f(a,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return f(a,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return f(a,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return f("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return f("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return f(a,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return f("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var e=window.prompt("Enter the link URL");e&&f("createLink",e)}},image:{icon:"&#128247;",title:"Image",result:function(){var e=window.prompt("Enter the image URL");e&&f("insertImage",e)}}},m={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",popup:"pell-popup",popup_inner:"pell-popup-inner",popup_title:"pell-popup-title",popup_header:"pell-popup-header",popup_content:"pell-popup-content",selected:"pell-button-selected"},i={exec:f,init:o};e.exec=f,e.init=o,e.default=i,Object.defineProperty(e,"__esModule",{value:!0})});
